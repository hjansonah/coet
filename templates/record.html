<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CoÃ«t Record - ID {{ record['ID'] }}</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #111; color: #fff; padding: 2rem; }
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        th, td { padding: 0.5rem; border: 1px solid #555; text-align: left; }
        th { background-color: #222; }
        td[contenteditable] { background-color: #222; }
        button { margin-top: 1rem; padding: 0.5rem 1rem; }
    </style>
</head>
<body>
    <h1>Record ID: {{ record['ID'] }}</h1>

    <table id="recordTable">
        <thead>
            <tr>
                {% for key in record.keys() %}
                    <th>{{ key }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr data-id="{{ record['ID'] }}">
                {% for key, value in record.items() %}
                    <td contenteditable="{{ 'false' if key == 'ID' else 'true' }}" data-col="{{ key }}">{{ value }}</td>
                {% endfor %}
            </tr>
        </tbody>
    </table>

    <button onclick="saveChanges()">Save Changes</button>

    <script>
        function saveChanges() {
            const row = document.querySelector('#recordTable tbody tr');
            const id = row.getAttribute('data-id');
            const cells = row.querySelectorAll('td');

            const updatedRecord = { ID: id };
            cells.forEach(cell => {
                const col = cell.getAttribute('data-col');
                if (col !== 'ID') {
                    updatedRecord[col] = cell.innerText.trim();
                }
            });

            fetch('/update_record', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(updatedRecord)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => alert('Error: ' + error));
        }
    </script>
</body>
</html>
