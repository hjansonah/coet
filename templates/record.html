<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CoÃ«t Record Viewer</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #111; color: #fff; padding: 2rem; }
        label { display: block; margin-top: 1rem; }
        input, textarea { width: 100%; padding: 0.5rem; margin-top: 0.25rem; background: #222; color: #fff; border: 1px solid #555; }
        input[readonly] { background-color: #333; }
        button { margin-top: 1rem; padding: 0.5rem 1rem; margin-right: 1rem; }
    </style>
</head>
<body>
    <h1>Record Viewer</h1>

    <div id="recordContainer">
        {% for col in columns %}
            <label>{{ col }}
                <input 
                    type="text" 
                    name="{{ col }}" 
                    value="{{ current_record[col] }}" 
                    {% if col == 'ID' %} readonly {% endif %}
                >
            </label>
        {% endfor %}
    </div>

    <button onclick="saveRecord()">Save</button>
    <button onclick="navigateRecord('prev')">Previous</button>
    <button onclick="navigateRecord('next')">Next</button>

    <script>
        function getFormData() {
            const inputs = document.querySelectorAll('#recordContainer input');
            const data = {};
            inputs.forEach(input => {
                data[input.name] = input.value.trim();
            });
            return data;
        }

        function saveRecord() {
            const record = getFormData();

            fetch('/update_record', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(record)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => alert('Error: ' + error));
        }

        function navigateRecord(direction) {
            const currentId = document.querySelector('input[name="ID"]').value;
            window.location.href = `/view_record/${direction}/${currentId}`;
        }
    </script>
</body>
</html>
